---
title: "Clone Algolia pricing"
description:
  "Replicate Algolia's pay-as-you-go pricing model with Lago."
---

In this article, you will learn how to build a 'pay-as-you-go' billing system.
This template is suitable for companies whose pricing fully depends on usage, such as cloud service providers and API companies, that only charge their customers for the resources they consume.

## Pricing structure
For its two main products, Algolia Search and Algolia Recommend, the platform offers its customers to subscribe for free and only pay based on usage.

| Model      | Search API     | Recommend API      |
|------------|------------|-------------|
| Monthly price | $1.50 / 1,000 requests | $0.60 / 1,000 requests |
| Free usage (each month)| 10,000 requests  | 10,000 requests |

Although users don't need to subscribe to access the platform, Algolia offers its customers **discounts** based on volume and commitment (rates available upon request).

## Get started

<Steps>
  <Step title="Create billable metrics">
    Create billable metrics to track request usage for Search and Recommend APIs.
    
    Refer to the [API reference](/api-reference/billable-metrics/create) to create the billable metric objects.

    1. Set the `aggregation_type` to `sum_agg`
    2. Set the `field_name` to `search_requests_volume` for Search API
    3. Set the `recurring` to `false` for metered billing
  </Step>
  <Step title="Create a plan with package pricing">
    Create a plan to price packages of requests used.

    Refer to the [API reference](/api-reference/plans/create) to create the plan object.

    1. Set the `amount_cents` to `0` since there is no subscription fee
    2. Set the `charges` to use `package` pricing model

    ```json
    [
      {
        "charge_model": "package",
        "properties": {
          "amount": "1.50",
          "free_units": 10000,
          "package_size": 1000
        }
      }
    ]
    ```
  </Step>
  <Step title="Offer volume and commitment discounts (optional)">
    “When committing to the equivalent of 100 Search units per month or more, you automatically unlock a discount compared to PAYGO. Please contact sales for more information.”

    Algolia doesn’t provide much information about their volume and commitment discounts but we know that customers who commit to making at least 100,000 Search requests per month (for Algolia, a “Search unit” is a package of 1,000 requests) can benefit from a reduced price. We are going to make some assumptions to see how we could implement this logic.

    If we want to keep our package pricing model, we should convert the commitment part of our plan into a subscription.

    With the standard pricing, 100,000 requests would be charged \$150 (i.e. 100 packages of 1,000 requests at \$1.50 each). Since we want to offer a discount to our customers, we can create a new plan with a monthly subscription of \$120, paid in advance. Then, we set the package price for 1000 requests at \$1.20. Also, we include 100,000 free units, which are covered by the subscription fee.

    ```json
    {
      "name": "Algolia Committed",
      "code": "algolia_committed",
      "interval": "monthly",
      "amount_cents": 12000, // subscription fee
      "amount_currency": "USD",
      "pay_in_advance": true,
      "charges": [
        {
          "billable_metric_code": "__BILLABLE_METRIC_CODE__",
          "charge_model": "package",
          "properties": {
            "amount": "1.20", // price per package
            "free_units": 100000, // free units covered by the subscription fee
            "package_size": 1000 // requests per package
          }
        }
      ]
    }
    ```
  </Step>
  <Step title="Ingest usage via events">
    Send usage events to Lago to track API requests.

    ```bash
    LAGO_URL="https://api.getlago.com"

    curl --location --request POST "$LAGO_URL/api/v1/events" \
      --header 'Authorization: Bearer __API_KEY__' \
      --header 'Content-Type: application/json' \
      --data-raw '{
        "event": {
          "transaction_id": "{{$randomUUID}}",
          "code": "__BILLABLE_METRIC_CODE__",
          "external_customer_id": "__EXTERNAL_CUSTOMER_ID__",
          "properties": {
            "search_requests_volume": 5000
          }
        }
      }'
    ```

    Refer to the [API reference](/api-reference/events/usage) to create an event.
  </Step>
</Steps>

## Wrap-up
'Pay-as-you-go' pricing strategies are popular among API companies like Algolia.
With Lago, you can adapt this template to your products and services, using some of our most popular features:

1. **Plan models**, with or without subscription;‍
2. **Billable metrics**, including the 'sum' aggregation type; and‍
3. **Charges**, including our package and graduated pricing models.

Give it a try, click [here](https://www.getlago.com/get-started) to get started!