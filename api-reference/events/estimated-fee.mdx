---
openapi: "POST /events/estimate_fees"
authMethod: "bearer"
title: "Estimate an upcoming fee"
description: "Estimate the fees that would be created after reception of an event for
a billable metric attached to one or multiple pay in advance charges."
---

<RequestExample>

```bash cURL
LAGO_URL="https://api.getlago.com"
API_KEY="__YOUR_API_KEY__"

curl --location --request POST "$LAGO_URL/api/v1/events/estimate_fees" \
--header "Authorization: Bearer $API_KEY" \
--header 'Content-Type: application/json' \
--data-raw '{
      "event": {
          "external_subscription_id": "__YOUR_SUBSCRIPTION_ID__",
          "code": "__BILLABLE_METRIC_CODE__",
          "properties": {
            "custom_field": 12,
          }
      }
  }'
```

```python Python
from lago_python_client.models import Event

event = Event(
  external_subscription_id="__YOUR_SUBSCRIPTION_ID__",
  code="__BILLABLE_METRIC_CODE__",
)

client.events.estimate_fees(event)
```

```ruby Ruby
require 'lago-ruby-client'

client = Lago::Api::Client.new(api_key: '__YOUR_API_KEY__')

client.events.estimate_fees(
  external_subscription_id: "__YOUR_SUBSCRIPTION_ID__",
  code: "__BILLABLE_METRIC_CODE__",
  properties: {
    custom_field: 12,
  }
)
```

```js Javascript
import { Client, getLagoError } from 'lago-javascript-client';

const lagoClient = Client('__YOUR_API_KEY__');

try {
    const { data } = await lagoClient.events.eventEstimateFees(estimateEvent);
} catch (error) {
    const lagoError = await getLagoError<typeof lagoClient.events.eventEstimateFees>(error);
}
```

```go Go
  import "fmt"
  import "github.com/getlago/lago-go-client"

  func main() {
    lagoClient := lago.New().SetApiKey("__YOUR_API_KEY__")

    eventEstimateInput := &lago.EventEstimateFeesInput{
      ExternalSubscriptionID: "__YOUR_SUBSCRIPTION_ID__",
      Code:          "__BILLABLE_METRIC_CODE__",
      Properties: map[string]string{
        "custom_field": "12",
      },
    }

    err := lagoClient.Event().EstimateFees(eventEstimateInput)
    if err != nil {
      // Error is *lago.Error
      panic(err)
    }
  }
```

</RequestExample>
